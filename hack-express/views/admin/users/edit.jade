//-
//-   Copyright 2013 Life Cycle Engineering
//-
//-   Licensed under the Apache License, Version 2.0 (the "License");
//-   you may not use this file except in compliance with the License.
//-   You may obtain a copy of the License at
//-
//-   http://www.apache.org/licenses/LICENSE-2.0
//-
//-   Unless required by applicable law or agreed to in writing, software
//-   distributed under the License is distributed on an "AS IS" BASIS,
//-   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//-   See the License for the specific language governing permissions and 
//-   limitations under the License.
//-

extends ../admin_layout

block admin_content
  ul(data-tabs="tabs").nav.nav-tabs#tabs
    li
      a(href="#general", data-toggle="tab") General
    li
      a(href="#password", data-toggle="tab") Password

  div.tab-content#tab-content
    div.tab-pane#general
      form(method='post', action='/admin/users/#{user._id}')
        input(type="hidden", name="_method", value="put")
        fieldset
          legend Edit User
          label Username
          input(type="text", name="username", placeholder="Enter User Name", value="#{user.username}", autofocus)
          legend Email
          input(type="email", name="email", placeholder="Enter Email Address", value="#{user.email}")
          label Team
          select(name="team_id")
            each team in teams
              if (team.id == user.team_id)
                option(value="#{team.id}", selected="selected") #{team.name}
              else
                option(value="#{team.id}") #{team.name}
        div.form-actions
          button(type="submit").btn.btn-primary Save changes
          a(href="/admin/users").btn.btn-link Cancel
    
    div.tab-pane#password
      form(method='post', action='/admin/users/#{user._id}/password')
        input(type="hidden", name="_method", value="put")
        fieldset
          legend Change Password
          label Password
          input(type="password", name="password", placeholder="Enter Password")
          label Confirm
          input(type="password", name="confirm", placeholder="Confirm Password")
        div.form-actions
          button(type="submit").btn.btn-primary Submit
          a(href="/admin/users").btn.btn-link Cancel
  